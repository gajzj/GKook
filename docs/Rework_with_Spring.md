# 使用 Spring 重构的计划
当前项目结构混乱，系统功能界限划分不明确，计划在未来使用 Spring 框架重构该项目。

这里主要记录一些未来重构时需要关注的问题和 idea。

---
## Q1
在 `CommandFactory` 这里，当前是在工厂类里面扫描目标包中的被 `@Command` 注解修饰的 `Command` 实现类。

重构方案：
- 可以使用 Spring 中 `@Order` 注解将所有的 `Command` 注入到 list 中，这样工厂类中就可以直接引用查询了。
- 保持原有的逻辑，但将这部分的代码抽出。

## Q2
目前整个项目中各个组件是依赖于 `BotManager` 来创建和互动的。

重构方案：
- 使用 Spring 框架后，将组件交给 IoC 容器创建。

## Q3
Spring 封装的支持 WebSocket 的接口。

重构方案：
- 如题。

## Q4
并发需求，未来可能会有多个线程：
- Websocket 的心跳检测
- 机器人进入语音频道后通过 RTCP 连接推流
- 机器人的主线程（应该需要继续细分）
